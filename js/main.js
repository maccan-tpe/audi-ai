"use strict";var app={};app.partial={},($||jQuery)&&(app.$=$.noConflict()||jQuery.noConflict()),function(t){t(function(){function a(a){if(!app.spa.hold){app.spa.hold=!0;var n=(document.createElement("div"),{title:null,url:a});app.spa.to=a,t.get(a,function(a){t(a).each(function(a,e){"og:title"===t(e).attr("property")&&(n.title=t(e).attr("content")),"content"===t(e).attr("role")&&(n.htmlContent=t(".main-content",e).html())}),app.spa.demand=n,e()})}}function e(){app.spa.next=app.spa.container.clone().html("").addClass("translateLeft").append(app.spa.demand.htmlContent),app.spa.next.insertAfter(app.spa.container),app.imageReload.refresh(),app.spa.next.one("transitionend",function(){t(".translateRight").remove(),app.spa.container=app.spa.next,app.spa.next=null,n(app.spa.demand,app.spa.url),t("[role-kv]").length||t("html").removeClass("loading"),app.spa.hold=!1}),app.spa.container.addClass("translateRight"),app.spa.next.removeClass("translateLeft"),t("html").addClass("loading"),t.each(app.partial,function(a,e){var n=t("[role="+a+"]");e(t,n),n.trigger("page:update")})}function n(t){document.title=t.title,history.pushState(t,t.title,t.url)}t.each(app.partial,function(a,e){var n=t("[role="+a+"]");e(t,n),n.trigger("page:update")}),app.imageReload.callback=function(){t("[role=content]").addClass("loaded")},app.imageReload.init(),t("[role=content] header nav").on("click",function(a){t(this).toggleClass("in"),t(this).hasClass("in")&&t("html.mobile,html.tablet").length&&ga("send","pageview",{page:"Mobile_0.0_nav",title:"Mobile_0.0_nav"})}),t("[role=content] header nav").removeClass("in"),app.spa={supported:"function"==typeof history.pushState,container:t(".main-content"),next:null,hold:!1},t(window).on("popstate",function(t){var e=t.originalEvent.state;return null===e&&(location.href="./"),document.title=e.title,a(e.url),!0}),app.spa.loadPage=a})}(app.$);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};app.utility=new function(){var t=app.$;t.fn.hasAttr=function(a){var e=t(this).attr(a);return"undefined"!==("undefined"==typeof e?"undefined":_typeof(e))&&e!==!1},this.share={facebook:function(t,a){t=encodeURIComponent(t||location.href+"?utm_source=facebook&utm_medium=fbshare_m&utm_campaign=camp"),a=encodeURIComponent(a||document.title),window.open("https://www.facebook.com/sharer.php?u="+t+"&amp;t="+a)},googleplus:function(t){t=encodeURIComponent(t||location.href+"?utm_source=g+&utm_medium=googleplus_m&utm_campaign=camp"),window.open("https://plus.google.com/share?url="+t,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},email:function(t,a){t=encodeURIComponent(t||location.href+"?utm_source=email&utm_medium=email_m&utm_campaign=camp"),a=encodeURIComponent(a||document.title);var e=encodeURIComponent(""+t+" #"+a);window.open("https://mail.google.com/mail/?view=cm&fs=1&to=&su=與你分享:"+a+"&body="+e+"&bcc=")}},this.getParam=function(t){var a=new RegExp("^.*[?&]"+t+"[=]([^&]+).*$","i");if(!a.test(location.search))return null;var e=location.search.replace(a,"$1");return decodeURIComponent(e)}},app.partial.preload=function(t){function a(a){function e(a){o[a]=!0;var e=!0;t.each(o,function(t,a){e=a&&e}),e&&n()}function n(){"function"==typeof app.imageReload.callback&&app.imageReload.callback()}var o={},i=[],r=t("img[data-src]:visible, figure[data-src]:visible").not(".loaded");r.each(function(a,e){t(e).attr("data-src")&&(o[t(e).attr("data-src")]=!1,i.push(e))}),t.each(o,function(a,n){if(/\.svg$/.test(a))t.get(a,function(n){t(i).filter(function(){return a==t(this).attr("data-src")}).each(function(a,e){t(e).addClass("loaded"),"img"===e.tagName.toLowerCase()?(t("svg",n).clone().attr("class",t(e).attr("class")).insertAfter(e),t(e).remove()):t(e).removeAttr("data-src").html(t("svg",n).clone())});e(a)});else{var o=new Image;o.onload=function(){t(i).filter(function(){return a==t(this).attr("data-src")}).each(function(a,e){t(e).addClass("loaded"),"img"===e.tagName.toLowerCase()?t(e).attr("src",t(e).attr("data-src")):t(e).css("background-image","url("+t(e).attr("data-src")+")")});e(a)},o.src=a}}),r.length||n()}app.dementions={mobile:!1,desktop:!1},app.imageReload={init:function(){t(window).on("resize",function(){t("img[data-src]:visible, figure[data-src]:visible").not("[src],[style]");a(function(){})}).trigger("resize")},refresh:function(){t(window).trigger("resize")},callback:function(){}}},app.partial.ga=function(t,a){var e=t("html").hasClass("mobile")||t("html").hasClass("tablet");e?t("[data-ga-m]").on("click",function(a){ga("send","event","Button","click",t(this).data("ga-m"))}):t("[data-ga]").on("click",function(a){ga("send","event","Button","click",t(this).data("ga"))})};